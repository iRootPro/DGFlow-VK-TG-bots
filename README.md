# DGFlowBots - Боты для Telegram и Vk на основе DialgFlow от Google

Данные скрипты - это простые обучаемые боты для общение с клиентами через Telegram и Vk. 

## Как установить

Python3 должен быть уже установлен в системе.  
Используя `pip` или  `pip3`  (если есть конфликт с python2) необходимо установить  зависимости:

```shell
pip install -r requirements.txt
```

Рекомендуется использовать виртуальное окружение для изоляции проекта.  
Подробности: [virtualenv/venv](https://docs.python.org/3/library/venv.html).

## Необходимые настройки

Все настройки хранятся в файле `.env`, создайте его в корне со скриптами.

Нам понадобятся:

1. Telegram Token
2. Telegram chat id
3. VK Token
4. Ключ-json для DialogFlow

1. Для получения Telegram **TOKEN** найдите в Telegram @botfather и создайте новый бот. После того, как бот будет создан, вы получите токен.

В файл `.env` добавить:
```shell
TELEGRAM_TOKEN=ВАШ_TELEGRAM_TOKEN
```
2. Для того, чтобы вы были в курсе возникших проблес с ботами необходимо указать `chat id` telegam, куда будут приходить логи.

В файл `.env` добавить:
```shell
TELEGRAM_CHATID=ВАШ_CHATID
```

3. Создайте гновую группу в VK или перейдите в настройки существующей. Справа в меню выберите пункт `Работа с API` и нажмите на кнопку `Создать ключ`.

В файл `.env` добавить:
```shell
VK_TOKEN=ВАШ_VK_TOKEN
```

4. Для получения ключа DialogFlow сначала необходимо зарегистрироваться [здесь](https://cloud.google.com/).
Далее создать проект, как указано [здесь](https://cloud.google.com/dialogflow/docs/quick/setup).
После чего создать агент, как указано [здесь](https://cloud.google.com/dialogflow/docs/quick/build-agent).
В завершении создать и скачать json-ключ. Иснтрукция [здесь](https://cloud.google.com/docs/authentication/getting-started). Скаченный ключ разместить в корне со скриптами.


В файл `.env` добавить:
```shell
GOOGLE_APPLICATION_CREDENTIALS=ИМЯ_ФАЙЛА_JSON_КЛЮЧА
```

## Как пользоваться

Первое, что нужно сделать - обучить бота. Для этого есть скрипт `learning_google_agent.py`. Для его обучения понадобится файл `questions.json`, в котором будут прописаны вопросы и ответы.

Пример файла:

```json
{
    "Устройство на работу": {
        "questions": [
            "Как устроиться к вам на работу?",
            "Как устроиться к вам?",
            "Как работать у вас?",
            "Хочу работать у вас",
            "Возможно-ли устроиться к вам?",
            "Можно-ли мне поработать у вас?",
            "Хочу работать редактором у вас"
        ],
        "answer": "Если вы хотите устроиться к нам, напишите на почту game-of-verbs@gmail.com мини-эссе о себе и прикрепите ваше портфолио."
    }
```

Для обучения запустите скрипт:

```shell
python3 learning_google_agent.py
```

Чтобы запустить бота VK:

```shell
python3 vk.py
```

Чтобы запустить бота Telegram:

```shell
python tg.py
```

## Цель проекта

Скрипты разработаны в образовательных целях.



